<!DOCTYPE html>
<html>
    <head>
        <title>Pallo</title>
        <style type="text/css">
            #gameBoard {
              width: 500px;
              margin: 20px auto 0 auto;
              background-color: #E288A0;
              background-color: rgba(255,255,255,0.5);

              border: 7px solid #B71F45;
              padding: 20px;
              border-radius: 10px;
              overflow: hidden;
            }
            .circle {
              border-radius: 50%;
              width: 75px;
              height: 75px;
              border: 1px solid #000;
              float: left;
            }
            .clearFloat {
              clear: both
            }
        </style>
        <script src="/socket.io/socket.io.js"></script>
<!-- we need to move the javascript to a file later -->
        <script type="text/javascript">

        window.onload = function() {
          var header = document.getElementById("header");
          var allUsers = document.getElementById("users");
          var gameWindow = document.getElementById("game-board");
          var lastWinner = document.getElementById("last-winner");
          var circle0 = document.getElementById("circle0");
          var circle1 = document.getElementById("circle1");
          var circle2 = document.getElementById("circle2");
          var circle3 = document.getElementById("circle3");
          var circle4 = document.getElementById("circle4");
          var user_id;
		  var userName;

		  var userName = prompt("Please Enter Your Name:")
		  
          var socket = io.connect('http://pallo.herokuapp.com');
          socket.on('users', function (data) {
            allUsers.innerHTML = "<strong>Users:</strong>" + data.users;
          });
          socket.on('setUser', function (data) {
            user_id = data;
			userName = prompt("Please enter Your Name")
			socket.emit ('setUserName', user_id, userName);
          });
          socket.on('update', function (data) {
            switch (data.circle) {
              case 'circle0':
                circle0.style.backgroundColor = data.color
                break;
              case 'circle1':
                circle1.style.backgroundColor = data.color
                break;
              case 'circle2':
                circle2.style.backgroundColor = data.color
                break;
              case 'circle3':
                circle3.style.backgroundColor = data.color
                break;
              case 'circle4':
                circle4.style.backgroundColor = data.color
                break;
            };
          });
          socket.on('win', function (data) {
            lastWinner.innerHTML = data.user + " user wins!";
          });

          circle0.onclick = function() {
            circle = 0;
            socket.emit('circleclick', user_id, circle);
          };
          circle1.onclick = function() {
            circle = 1;
            socket.emit('circleclick', user_id, circle);
          };
          circle2.onclick = function() {
            circle = 2;
            socket.emit('circleclick', user_id, circle);
          };
          circle3.onclick = function() {
            circle = 3;
            socket.emit('circleclick', user_id, circle);
          };
          circle4.onclick = function() {
            circle = 4;
            socket.emit('circleclick', user_id, circle);
          };
        };
        </script>
    </head>
    <body class="main">
        <div id="header"></div>
        <hr />
        <div id="gameBoard">
            <div id="circle0" class="circle"></div>
            <div id="circle1" class="circle"></div>
            <div id="circle2" class="circle"></div>
            <div id="circle3" class="circle"></div>
            <div id="circle4" class="circle"></div>
        </div>
        <hr class="clearFloat" />
        <div id="users"></div>
        <hr />
        <div id="last-winner"></div>
    </body>
</html>
